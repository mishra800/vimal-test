<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard - Car Seizure Management</title>
    <meta name="description" content="Submit car seizure reports with photo evidence">
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="apple-touch-icon" href="logo.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
</head>
<body>
    <div class="dashboard-container">
        <header class="dashboard-header">
            <div class="header-left">
                <img src="logo.png" alt="Car Seizure Management System Logo" class="header-logo">
                <div class="header-text">
                    <h1>ğŸš— Car Seizure Report</h1>
                    <p class="header-subtitle">Submit detailed seizure documentation</p>
                </div>
            </div>
            <div class="user-info">
                <div class="user-details">
                    <span id="userNameDisplay" class="user-name"></span>
                    <span class="user-role">Officer</span>
                </div>
                <button onclick="logout()" class="logout-btn">
                    <span>ğŸšª</span>
                    <span>Logout</span>
                </button>
            </div>
        </header>

        <main class="form-container">
            <form id="seizureForm" enctype="multipart/form-data">
                <!-- Vehicle Information Section -->
                <section class="form-section">
                    <h3>ğŸš™ Vehicle Information</h3>
                    
                    <div class="input-grid">
                        <div class="input-group">
                            <label for="vehicleNumber">Vehicle Registration Number *</label>
                            <input type="text" id="vehicleNumber" placeholder="e.g., MH12AB1234" required 
                                   aria-describedby="vehicleNumber-help">
                            <small id="vehicleNumber-help" class="input-help">Enter the complete registration number</small>
                        </div>

                        <div class="input-group">
                            <label for="vehicleType">Vehicle Type *</label>
                            <select id="vehicleType" required aria-describedby="vehicleType-help">
                                <option value="">Select Vehicle Type</option>
                                <option value="car">ğŸš— Car</option>
                                <option value="motorcycle">ğŸï¸ Motorcycle</option>
                                <option value="truck">ğŸš› Truck</option>
                                <option value="bus">ğŸšŒ Bus</option>
                                <option value="auto">ğŸ›º Auto Rickshaw</option>
                                <option value="other">ğŸš Other</option>
                            </select>
                            <small id="vehicleType-help" class="input-help">Choose the appropriate vehicle category</small>
                        </div>
                    </div>

                    <div class="input-grid">
                        <div class="input-group">
                            <label for="vehicleMake">Make & Model *</label>
                            <input type="text" id="vehicleMake" placeholder="e.g., Maruti Swift" required>
                        </div>

                        <div class="input-group">
                            <label for="vehicleColor">Color *</label>
                            <input type="text" id="vehicleColor" placeholder="e.g., White" required>
                        </div>
                    </div>
                </section>

                <!-- Seizure Details Section -->
                <section class="form-section">
                    <h3>ğŸ“ Seizure Details</h3>
                    
                    <div class="input-group">
                        <label for="seizureLocation">Location *</label>
                        <div class="location-input-group">
                            <input type="text" id="seizureLocation" placeholder="Enter seizure location" required>
                            <button type="button" id="getLocationBtn" class="location-btn" 
                                    aria-label="Get current GPS location">
                                ğŸ“ GPS
                            </button>
                        </div>
                        <div id="coordinates" class="coordinates-display" aria-live="polite"></div>
                    </div>

                    <div class="input-grid">
                        <div class="input-group">
                            <label for="seizureReason">Reason for Seizure *</label>
                            <select id="seizureReason" required>
                                <option value="">Select Reason</option>
                                <option value="no-documents">ğŸ“„ No Valid Documents</option>
                                <option value="traffic-violation">ğŸš¦ Traffic Violation</option>
                                <option value="illegal-parking">ğŸš« Illegal Parking</option>
                                <option value="accident">ğŸ’¥ Accident Related</option>
                                <option value="other">ğŸ“ Other</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label for="seizureTime">Time of Seizure</label>
                            <input type="datetime-local" id="seizureTime">
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="additionalNotes">Additional Notes</label>
                        <textarea id="additionalNotes" rows="4" 
                                  placeholder="Any additional information about the seizure..."></textarea>
                    </div>
                </section>

                <div class="form-section">
                    <h3>Photo Evidence & Documents</h3>
                    
                    <!-- Camera Photo Capture -->
                    <div class="camera-section">
                        <h4>ğŸ“· Vehicle Photo (Required)</h4>
                        <div class="camera-controls">
                            <button type="button" onclick="openCamera()" class="camera-btn">
                                ğŸ“± Take Photo with Camera
                            </button>
                            <button type="button" onclick="document.getElementById('vehiclePhoto').click()" class="gallery-btn">
                                ğŸ–¼ï¸ Choose from Gallery
                            </button>
                        </div>
                        
                        <!-- Hidden file input for gallery -->
                        <input type="file" id="vehiclePhoto" accept="image/*" style="display: none;" onchange="handlePhotoSelection(event)">
                        
                        <!-- Camera preview area -->
                        <div id="cameraPreview" class="camera-preview" style="display: none;">
                            <video id="cameraVideo" autoplay playsinline></video>
                            <div class="camera-overlay">
                                <div class="camera-frame"></div>
                                <div class="camera-actions">
                                    <button type="button" onclick="capturePhoto()" class="capture-btn">ğŸ“¸ Capture</button>
                                    <button type="button" onclick="closeCamera()" class="close-camera-btn">âŒ Close</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Photo preview area -->
                        <div id="photoPreview" class="photo-preview">
                            <!-- Captured/selected photo will appear here -->
                        </div>
                    </div>

                    <!-- Additional Documents Upload -->
                    <div class="document-upload">
                        <h4>ğŸ“„ Additional Documents (Optional)</h4>
                        <div class="document-types">
                            <div class="doc-upload-item">
                                <label for="rcDocument">Registration Certificate (RC)</label>
                                <div class="doc-controls">
                                    <button type="button" onclick="openDocCamera('rc')" class="doc-camera-btn">ğŸ“± Camera</button>
                                    <input type="file" id="rcDocument" accept="image/*,.pdf" onchange="handleDocumentUpload(event, 'rc')">
                                    <label for="rcDocument" class="doc-gallery-btn">ğŸ–¼ï¸ Gallery</label>
                                </div>
                                <div id="rcPreview" class="doc-preview"></div>
                            </div>
                            
                            <div class="doc-upload-item">
                                <label for="licenseDocument">Driving License</label>
                                <div class="doc-controls">
                                    <button type="button" onclick="openDocCamera('license')" class="doc-camera-btn">ğŸ“± Camera</button>
                                    <input type="file" id="licenseDocument" accept="image/*,.pdf" onchange="handleDocumentUpload(event, 'license')">
                                    <label for="licenseDocument" class="doc-gallery-btn">ğŸ–¼ï¸ Gallery</label>
                                </div>
                                <div id="licensePreview" class="doc-preview"></div>
                            </div>
                            
                            <div class="doc-upload-item">
                                <label for="otherDocument">Other Document</label>
                                <div class="doc-controls">
                                    <button type="button" onclick="openDocCamera('other')" class="doc-camera-btn">ğŸ“± Camera</button>
                                    <input type="file" id="otherDocument" accept="image/*,.pdf" onchange="handleDocumentUpload(event, 'other')">
                                    <label for="otherDocument" class="doc-gallery-btn">ğŸ–¼ï¸ Gallery</label>
                                </div>
                                <div id="otherPreview" class="doc-preview"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <button type="submit" class="submit-btn">Submit Report</button>
            </form>
        </main>

        <!-- User Reports Section -->
        <section class="user-reports-section">
            <div class="reports-header">
                <h2>ğŸ“‹ My Submitted Reports</h2>
                <div class="reports-controls">
                    <button onclick="refreshUserReports()" class="refresh-btn">ğŸ”„ Refresh</button>
                    <select id="userReportFilter" onchange="filterUserReports()" class="filter-select">
                        <option value="all">All Reports</option>
                        <option value="pending">Pending</option>
                        <option value="reviewed">Reviewed</option>
                        <option value="resolved">Resolved</option>
                    </select>
                </div>
            </div>
            
            <div id="userReportsList" class="user-reports-list">
                <!-- User reports will be loaded here -->
            </div>
        </section>
    </div>

    <!-- Report Details Modal -->
    <div id="userReportModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeUserReportModal()">&times;</span>
            <div id="userReportDetails">
                <!-- Report details will be loaded here -->
            </div>
        </div>
    </div>

    <script src="qrcode.min.js"></script>
    <script src="script.js"></script>
</body>
</html>